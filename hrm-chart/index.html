<!DOCTYPE html>
<html lang="en" dir="ltr">

  <head>
    <meta charset="utf-8">
    <title>Web Bluetooth - HRM</title>
  </head>

  <body>
    <h1>HRM</h1>

    <form>
      <button id="startNotifications">Start notifications</button>
      <button id="stopNotifications">Stop notifications</button>
    </form>

    <div class="chart-container" style="position: relative; height:30vh; width:70vw">
      <canvas id="line-chart"></canvas>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <script>
      let chart = new Chart(document.getElementById("line-chart"), {
        type: 'line',
        data: {
          labels: [],
          datasets: [{ 
              data: [],
              label: "BPM",
              borderColor: "#3e95cd",
              fill: false
            }
          ]
        },
        options: {
          responsive: true,
          animation: {
              duration: 0,
          },
          scales: {
              yAxes: [{
                  ticks: {
                      max: 80,
                      min: 40,
                      stepSize: 5
                  }
              }],
          },
        }
      });

      let index = 0;
      function addData(data) {
        let label = index++;
          chart.data.labels.push(label);
          if (index > 10) chart.data.labels.shift();
          chart.data.datasets.forEach((dataset) => {
              dataset.data.push(data);
              if (index > 10) dataset.data.shift();
          });
          chart.update();
      }
    </script>

    <script type="text/javascript" src="ble.js"></script>
  </body>

</html>

